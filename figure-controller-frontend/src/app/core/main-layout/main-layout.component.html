<div class="min-h-screen bg-[#F9F6F1] flex flex-col lg:flex-row font-sans relative">
  <!-- Mobile Overlay -->
  @if (isMobileMenuOpen) {
    <div
      class="fixed inset-0 bg-black/50 z-40 lg:hidden"
      (click)="isMobileMenuOpen = false">
    </div>
  }

  <!-- Sidebar -->
  <aside
    class="fixed lg:static inset-y-0 left-0 z-50 w-72 bg-[#1e3a8a]
           transform transition-transform duration-300 ease-in-out
           shadow-2xl overflow-y-auto
           lg:translate-x-0"
    [class.-translate-x-full]="!isMobileMenuOpen"
    [class.translate-x-0]="isMobileMenuOpen">

    <app-sidebar-component
      [activeTab]="activeTab"
      (tabChange)="onTabChange($event)"
      (logoutRequested)="onLogoutRequested()" />
  </aside>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col min-w-0 h-screen overflow-hidden lg:ml-0">
    <!-- Header -->
    <header class="bg-white border-b border-[#e5e0d8] px-4 sm:px-6 py-4
                    flex items-center justify-between sticky top-0 z-30 shadow-sm">
      <div class="flex items-center gap-3 flex-1 min-w-0">
        <!-- Mobile Menu Button -->
        <button
          (click)="isMobileMenuOpen = !isMobileMenuOpen"
          class="p-2 lg:hidden hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0">
          <lucide-icon name="menu" size="24" class="text-gray-600"></lucide-icon>
        </button>

        <!-- Page Title -->
        <h2 class="text-lg sm:text-xl font-bold text-[#003D5C] truncate">
          {{ pageTitle }}
        </h2>
      </div>

      <!-- Last Updated -->
      <div class="hidden md:block text-right">
        <p class="text-xs text-gray-500">Last updated</p>
        <p class="text-sm font-medium text-[#003D5C]">{{ currentTime | date: 'medium' }}</p>
      </div>
    </header>

    <!-- Scrollable Content -->
    <div class="flex-1 overflow-y-auto p-4 md:p-8 bg-[#F9F6F1]">
      <div class="max-w-7xl mx-auto">
        <router-outlet></router-outlet>
      </div>

      <footer class="mt-12 pt-6 border-t border-gray-200 text-center text-sm text-gray-500 pb-6">
        <p>Â© {{ currentTime | date: 'yyyy' }} Co-op Insurance Services Limited. All rights reserved.</p>
      </footer>
    </div>
  </main>
</div>



<!-- LOGOUT CONFIRM MODAL -->
<div *ngIf="showLogoutConfirm"
     class="fixed inset-0 z-[1000] flex items-center justify-center bg-black/40">

  <div class="bg-white rounded-xl shadow-xl w-96 p-6 text-center">
    <h3 class="text-lg font-semibold text-gray-800 mb-2">
      Confirm Logout
    </h3>

    <p class="text-sm text-gray-600 mb-6">
      Are you sure you want to log out?
    </p>

    <div class="flex justify-center gap-4 mt-6">
      <button
        (click)="cancelLogout()"
        class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-100">
        Cancel
      </button>

      <button
        (click)="confirmLogout()"
        class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700">
        Logout
      </button>
    </div>
  </div>
</div>


<!-- LOGGING OUT OVERLAY -->
<div *ngIf="isLoggingOut"
     class="fixed inset-0 z-[1100] bg-black/50 flex flex-col items-center justify-center">

  <div class="w-14 h-14 border-4 border-white border-t-transparent rounded-full animate-spin mb-4"></div>

  <p class="text-white text-sm tracking-wide">
    Logging you out...
  </p>
</div>
